(function(t){function e(e){for(var n,c,s=e[0],i=e[1],u=e[2],d=0,f=[];d<s.length;d++)c=s[d],r[c]&&f.push(r[c][0]),r[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);l&&l(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var i=a[s];0!==r[i]&&(n=!1)}n&&(o.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},r={app:0},o=[];function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/vue-shop/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=i;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0295":function(t,e,a){},"034f":function(t,e,a){"use strict";var n=a("64a9"),r=a.n(n);r.a},"0927":function(t,e,a){},"0a7f":function(t,e,a){},"12ab":function(t,e,a){"use strict";var n=a("b94c"),r=a.n(n);r.a},2626:function(t,e,a){"use strict";var n=a("85e2"),r=a.n(n);r.a},"3eb1":function(t,e,a){"use strict";var n=a("898b"),r=a.n(n);r.a},"549e":function(t,e,a){"use strict";var n=a("d8d7"),r=a.n(n);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-wrap",attrs:{id:"app"}},[a("Page"),a("CartModal")],1)},o=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("Header"),a("div",{staticClass:"products"},t._l(t.items,function(t,e){return a("Category",{key:e,attrs:{data:t}})}),1)],1)},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("v-icon",{staticClass:"logo",attrs:{name:"carrot"}}),a("div",{staticClass:"name"},[t._v("Stuffshop")]),a("Rate"),a("HeadCart")],1)},u=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("span",{staticClass:"usd"},[t._v("1 USD = ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rate,expression:"rate"}],staticClass:"rate-inp",attrs:{type:"text"},domProps:{value:t.rate},on:{input:function(e){e.target.composing||(t.rate=e.target.value)}}}),a("span",{staticClass:"rub"},[t._v("₽")])])},d=[],f=(a("a481"),null),p={name:"Rate",data:function(){return{value:20}},computed:{rate:{get:function(){return this.$store.state.rate},set:function(t){var e=this;clearTimeout(f),f=setTimeout(function(){var a=t.replace(/[^\d.]/g,"");e.$store.commit("SET_RATE",a),e.$store.commit("UPDATE_PRICE"),e.$store.commit("SET_TOTAL")},500)}}}},v=p,m=(a("d589"),a("2877")),T=Object(m["a"])(v,l,d,!1,null,"459c8fd2",null),_=T.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap-head-cart",on:{click:t.openCart}},[a("span",[t._v(t._s(t.price))]),a("span",{staticClass:"rub"},[t._v("₽")]),a("v-icon",{staticClass:"busket",attrs:{name:"shopping-basket"}}),a("span",[t._v("("+t._s(t.count)+")")])],1)},C=[],b=a("2f62"),g={name:"HeadCart",methods:{openCart:function(){this.count&&this.$store.commit("TOGGLE_CART",!0)}},computed:Object(b["b"])({price:function(t){return t.amount},count:function(t){return t.count}})},N=g,O=(a("617f"),Object(m["a"])(N,h,C,!1,null,"26c86db5",null)),E=O.exports,w={name:"Header",components:{Rate:_,HeadCart:E}},P=w,y=(a("3eb1"),Object(m["a"])(P,i,u,!1,null,"86fdce82",null)),A=y.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block"},[a("div",{staticClass:"name",on:{click:function(e){t.show=!t.show}}},[a("v-icon",{staticClass:"arrow",class:{closed:!t.show},attrs:{name:"angle-down"}}),t._v("\n    "+t._s(t.data[0].group_name)+"\n  ")],1),t.show?a("div",{staticClass:"products"},t._l(t.data,function(t){return a("Product",{key:t.T,attrs:{data:t}})}),1):t._e()])},j=[],G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[t.data.cart?a("div",{staticClass:"budget",on:{click:t.openCart}},[a("v-icon",{staticClass:"busket",attrs:{name:"shopping-basket"}})],1):t._e(),a("div",{staticClass:"title"},[t._v("\n    "+t._s(t.data.product_name)+"\n  ")]),a("div",{staticClass:"controls"},[a("div",{staticClass:"add",class:{disabled:t.data.P===t.data.cart},on:{click:function(e){return t.addToCart()}}},[a("v-icon",{staticClass:"cart",attrs:{name:"cart-plus"}})],1),a("div",{staticClass:"amount"},[t._v("("+t._s(t.data.P)+")")]),a("div",{staticClass:"price",class:{up:t.data.prevPrice&&t.data.prevPrice<t.data.price,down:t.data.prevPrice&&t.data.prevPrice>t.data.price}},[t._v("\n      "+t._s(t.data.price)+"\n      "),a("span",[t._v("₽")])])])])},x=[],R={name:"Product",props:{data:Object},methods:{openCart:function(){this.$store.commit("TOGGLE_CART",!0)},addToCart:function(){var t=this.data.cart;if(this.data.P!==t){var e={id:this.data.T,value:t?t+1:1},a={position:"bottom-right",duration:1e3,className:"good"};this.$store.commit("PUT_IN_CART",e),this.$store.commit("SET_TOTAL"),this.$toasted.show("Товар добавлен в корзину",a)}}}},S=R,k=(a("549e"),Object(m["a"])(S,G,x,!1,null,"18e7c5fa",null)),D=k.exports,I={name:"Category",components:{Product:D},data:function(){return{show:!0}},props:{data:Array}},M=I,L=(a("2626"),Object(m["a"])(M,$,j,!1,null,"69f8a139",null)),B=L.exports,U={name:"Page",components:{Header:A,Category:B},computed:{items:function(){return this.$store.getters.GOODS}}},H=U,F=(a("6c35"),Object(m["a"])(H,c,s,!1,null,"6cfcb4ea",null)),J=F.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.cartModal?a("div",{staticClass:"js-close overlay",on:{click:t.close}},[a("div",{staticClass:"cart-modal-wrap"},[a("CartTable"),a("div",{staticClass:"total"},[t._v("\n      Итого:\n      "),a("span",{staticClass:"total-price"},[t._v(t._s(t.amount))]),a("span",{staticClass:"rub"},[t._v("₽")])]),a("div",{staticClass:"js-close close-but"},[t._v("\n      Закрыть\n    ")])],1)]):t._e()},V=[],W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-wrap"},[a("table",{staticClass:"cart-table"},[t._m(0),a("tbody",t._l(t.goods,function(e){return a("tr",{key:e.T},[a("td",[t._v(t._s(e.product_name))]),a("td",[a("input",{staticClass:"cart-inp",attrs:{type:"text"},domProps:{value:e.cart},on:{keyup:function(a){return t.onKeyupInput(a,e)},change:function(a){return t.onChangeInput(a,e)}}}),t._v(" шт.\n        "),e.cart===e.P?a("div",{staticClass:"warning"},[t._v("\n          Количество ограничено\n        ")]):t._e()]),a("td",[t._v(t._s(e.price)+" руб.")]),a("td",[a("span",{on:{click:function(a){return t.deleteItem(e)}}},[a("v-icon",{staticClass:"delete",attrs:{name:"trash-alt"}})],1)])])}),0)])])},X=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"40"}},[t._v("Наименование товара")]),a("th",{attrs:{width:"20"}},[t._v("Кол-во")]),a("th",{attrs:{width:"30"}},[t._v("Цена")]),a("th",{attrs:{width:"10"}})])])}],q={name:"CartTable",methods:{deleteItem:function(t){var e={id:t.T,value:0};this.$store.commit("PUT_IN_CART",e),this.$store.commit("SET_TOTAL"),this.goods.length||this.$store.commit("TOGGLE_CART",!1)},onKeyupInput:function(t,e){var a=t.target.value;if(a){var n=a.replace(/[^\d]/g,""),r=n>e.P?e.P:n,o={id:e.T,value:+r};t.target.value=r,this.$store.commit("PUT_IN_CART",o),this.$store.commit("SET_TOTAL")}},onChangeInput:function(t,e){+t.target.value||(t.target.value=e.cart)}},computed:Object(b["b"])({goods:function(t){return t.goods.filter(function(t){return t.cart})}})},z=q,Q=(a("79c9"),Object(m["a"])(z,W,X,!1,null,"9c1b7a7e",null)),Y=Q.exports,Z={name:"CartModal",components:{CartTable:Y},methods:{close:function(t){"js-close"===t.target.classList[0]&&this.$store.commit("TOGGLE_CART",!1)}},computed:Object(b["b"])({cartModal:function(t){return t.cartModal},amount:function(t){return t.amount}})},tt=Z,et=(a("12ab"),Object(m["a"])(tt,K,V,!1,null,"eb408dc0",null)),at=et.exports,nt={name:"app",components:{Page:J,CartModal:at},methods:{getData:function(){this.$store.dispatch("GET_DATA")}},mounted:function(){this.getData(),this.$options.interval=setInterval(this.getData,15e3)},beforeDestroy:function(){clearInterval(this.$options.interval)}},rt=nt,ot=(a("034f"),Object(m["a"])(rt,r,o,!1,null,null,null)),ct=ot.exports,st=(a("96cf"),a("3b8d")),it=(a("ac6a"),a("bc3a")),ut=a.n(it),lt={1:{G:"Книги",B:{1:{N:"Алгоритмы. Построение и анализ. Т. Кормен, Ч. Лейзерсон, Р. Ривест, К. Штайн.",T:1},2:{N:"Совершенный код. Стив Макконнелл.",T:1},3:{N:"JavaScript. Подробное руководство. Дэвид Флэнаган.",T:1}}},2:{G:"Еда",C:2,B:{7:{N:"Овсяные пирожные с шоколадной прослойкой",T:3},8:{N:"Суп с пекинской капустой",T:3},85:{N:"Вишня в коньяке",T:3},86:{N:"Постный фаршированный перец",T:3},109:{N:"Салат Подсолнух",T:""},110:{N:"Форель «Эрланген»",T:""},111:{N:"Салат с морепродуктами",T:3},112:{N:"Тёртый пирог",T:3},115:{N:"Свинина, маринованная в красном вине, с кориандром",T:""},116:{N:"Салат с черносливом и ветчиной",T:""},125:{N:"Болгарский перец и цуккини на гриле",T:3},126:{N:"Салат «Букет нарциссов»",T:3},127:{N:"Салат из морепродуктов, с огурцами, рукколой и оливками",T:3}}},5:{G:"Спорт",C:2,B:{184:{N:"Беговая дорожка",T:1},185:{N:"Гантели съемные",T:1},186:{N:"Ружьё охотничье",T:1},187:{N:"Велотренажер",T:1}}},8:{G:"Сантехника",C:3,B:{4:{N:"Акриловая ванна Alpen Mars ",T:1},5:{N:"Смеситель Sturm Classica",T:1},6:{N:"Тумба с раковиной Tiffany World ",T:1}}},10:{G:"Запчасти для машин",C:3,B:{191:{N:"Амортизатор задний CX-5 ",T:3},192:{N:"Пружина амортизатора ",T:3},193:{N:"Корпус воздушного фильтра ",T:3},194:{N:"Ремень приводной",T:3},195:{N:"Диффузор радиатора",T:1},196:{N:"Фильтр АКПП",T:3}}},15:{G:"Сувениры",C:2,B:{11:{N:"Набор для рисования Пастель",T:3},12:{N:"Брелок-рулетка",T:3},63:{N:"Брелок-открывалка",T:3},64:{N:"Ручка-стилус шариковая",T:3},146:{N:"Браслет",T:3},147:{N:"Чехол для очков",T:3},148:{N:"Сумка для выставок",T:3}}}};n["a"].use(b["a"]);var dt=new b["a"].Store({state:{goods:null,rate:null,oldPrice:null,amount:0,count:0,cartModal:!1},getters:{GOODS:function(t){var e=vt(t.goods);return e}},mutations:{TOGGLE_CART:function(t,e){t.cartModal=e},SET_DATA:function(t,e){t.goods=e},SET_RATE:function(t,e){t.rate=e},SET_TOTAL:function(t){var e=Tt(t.goods);t.amount=+e.amount.toFixed(2),t.count=e.count},PUT_IN_CART:function(t,e){t.goods.forEach(function(a,r){a.T===e.id&&n["a"].set(t.goods[r],"cart",e.value)})},UPDATE_PRICE:function(t){var e=t.rate,a=t.goods;a.forEach(function(t){t.prevPrice=t.price,t.price=+(t.C*e).toFixed(2)})}},actions:{GET_DATA:function(){var t=Object(st["a"])(regeneratorRuntime.mark(function t(e){var a,n,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ut.a.get("data.json");case 3:a=t.sent,n=a.data.Value.Goods,r=mt(20,80),o=ft(e.state.goods),pt(n,r,o),e.commit("SET_RATE",r),e.commit("SET_DATA",n),e.commit("SET_TOTAL",n),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log("GET DATA ERROR:",t.t0),alert("ERROR");case 17:case"end":return t.stop()}},t,null,[[0,13]])}));function e(e){return t.apply(this,arguments)}return e}()}});function ft(t){var e=null;return t&&(e=t.reduce(function(t,e){return t[e.T]={price:e.price,cart:e.cart},t},Object.create(null))),e}function pt(t,e,a){t.forEach(function(t){t.group_name=lt[t.G].G,t.product_name=lt[t.G].B[t.T].N,a&&a[t.T]&&(t.prevPrice=a[t.T].price,t.cart=a[t.T].cart),t.price=+(t.C*e).toFixed(2)})}function vt(t){return t&&t.length?t.reduce(function(t,e){return t[e.G]=t[e.G]||[],t[e.G].push(e),t},Object.create(null)):[]}function mt(t,e){return+(Math.random()*(e-t+1)+t).toFixed(2)}function Tt(t){return t.reduce(function(t,e){return e.cart?(t.amount=t.amount+e.cart*e.price,t.count=t.count+e.cart,t):t},{amount:0,count:0})}var _t=a("a65d"),ht=a.n(_t),Ct=(a("da83"),a("ea4b"),a("280f"),a("6b77"),a("241d"),a("8bdf"),a("0874"));n["a"].config.productionTip=!1,n["a"].component("v-icon",Ct["a"]),n["a"].use(ht.a),new n["a"]({store:dt,render:function(t){return t(ct)}}).$mount("#app")},"617f":function(t,e,a){"use strict";var n=a("dd97"),r=a.n(n);r.a},"64a9":function(t,e,a){},"6c35":function(t,e,a){"use strict";var n=a("0927"),r=a.n(n);r.a},"79c9":function(t,e,a){"use strict";var n=a("0a7f"),r=a.n(n);r.a},"85e2":function(t,e,a){},"898b":function(t,e,a){},b94c:function(t,e,a){},d589:function(t,e,a){"use strict";var n=a("0295"),r=a.n(n);r.a},d8d7:function(t,e,a){},dd97:function(t,e,a){}});
//# sourceMappingURL=app.6221daa0.js.map